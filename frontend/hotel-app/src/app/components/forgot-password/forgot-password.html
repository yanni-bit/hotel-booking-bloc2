<!-- ============================================================================
     FICHIER : forgot-password.component.html
     DESCRIPTION : Page de demande de réinitialisation de mot de passe
                   Formulaire email avec envoi de lien de récupération
     AUTEUR : Yannick
     DATE : 2025
     ============================================================================
     STRUCTURE :
       - Container centré (col-md-5 col-lg-4)
       - En-tête avec icône et titre
       - Carte avec formulaire :
         * Message de succès (conditionnel)
         * Message d'erreur (conditionnel)
         * Formulaire email (masqué après succès)
         * Bouton retour login (affiché après succès)
       - Lien retour login
     ACCESSIBILITÉ :
       - role="alert" sur les messages
       - autocomplete="email" sur le champ email
     SYNTAXE ANGULAR 17+ :
       - @if / @else pour les conditions
     ============================================================================ -->

<main class="forgot-password-page py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-5 col-lg-4">

        <!-- ================================================================
             EN-TÊTE DE PAGE
             Icône clé + titre + sous-titre explicatif
             ================================================================ -->
        <div class="text-center mb-4">
          <h1 class="h3 text-turquoise">
            <i class="bi bi-key me-2"></i>{{ 'auth.forgotPassword' | translate }}
          </h1>
          <p class="text-muted">{{ 'auth.forgotPasswordSubtitle' | translate }}</p>
        </div>

        <!-- ================================================================
             CARTE FORMULAIRE
             ================================================================ -->
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4">

            <!-- ============================================================
                 MESSAGE DE SUCCÈS
                 Affiché après envoi réussi du lien
                 ============================================================ -->
            @if (successMessage) {
            <div class="alert alert-success" role="alert">
              <i class="bi bi-check-circle me-2"></i>{{ successMessage }}
              <hr>
              <p class="mb-0 small">
                <i class="bi bi-info-circle me-1"></i>
                {{ 'auth.checkConsole' | translate }}
              </p>
            </div>
            }

            <!-- ============================================================
                 MESSAGE D'ERREUR
                 Affiché en cas de problème
                 ============================================================ -->
            @if (errorMessage) {
            <div class="alert alert-danger" role="alert">
              <i class="bi bi-exclamation-triangle me-2"></i>{{ errorMessage }}
            </div>
            }

            <!-- ============================================================
                 FORMULAIRE EMAIL
                 Masqué après envoi réussi
                 ============================================================ -->
            @if (!successMessage) {
            <form (ngSubmit)="onSubmit()">

              <!-- Champ Email -->
              <div class="mb-4">
                <label class="form-label fw-bold">{{ 'auth.email' | translate }}</label>
                <input type="email" class="form-control form-control-lg" [(ngModel)]="email" name="email"
                  placeholder="votre@email.com" required autocomplete="email">
                <!-- Indication pour l'utilisateur -->
                <small class="text-muted">
                  {{ 'auth.forgotPasswordHint' | translate }}
                </small>
              </div>

              <!-- Bouton Envoyer -->
              <button type="submit" class="btn btn-primary btn-lg w-100 mb-3" [disabled]="loading">
                <!-- État normal -->
                @if (!loading) {
                <i class="bi bi-envelope me-2"></i>{{ 'auth.sendResetLink' | translate }}
                }
                <!-- État chargement -->
                @else {
                <span class="spinner-border spinner-border-sm me-2"></span>{{ 'auth.sending' | translate }}
                }
              </button>

            </form>
            }

            <!-- ============================================================
                 BOUTON RETOUR LOGIN (après succès)
                 Remplace le formulaire après envoi réussi
                 ============================================================ -->
            @if (successMessage) {
            <a [routerLink]="['/login']" class="btn btn-primary btn-lg w-100">
              <i class="bi bi-box-arrow-in-right me-2"></i>{{ 'auth.backToLogin' | translate }}
            </a>
            }

          </div>
        </div>

        <!-- ================================================================
             LIEN RETOUR LOGIN
             Toujours visible en bas de page
             ================================================================ -->
        <div class="text-center mt-3">
          <a [routerLink]="['/login']" class="text-muted">
            <i class="bi bi-arrow-left me-1"></i>{{ 'auth.backToLogin' | translate }}
          </a>
        </div>

      </div>
    </div>
  </div>
</main>